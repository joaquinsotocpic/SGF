<div id="rep-resumen-categorias" class="p-4 md:p-6 space-y-5">
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
    <div>
      <h1 class="text-xl md:text-2xl font-semibold text-slate-900">Resumen por categorías</h1>
      <p class="text-sm text-slate-600 mt-1">Totales y participación por categoría según filtros. Click para ver movimientos.</p>
    </div>
    <div class="flex items-center gap-2"><button type="button" data-export-pdf data-pdf-target="rep-resumen-categorias" data-pdf-name="resumen_categorias" class="inline-flex items-center gap-2 px-3 py-2 rounded-xl border bg-white hover:bg-slate-50 text-sm">
        <i data-lucide="file-down" class="w-4 h-4"></i>
        PDF
      </button><button type="button" data-rep-help="resumen_categorias" class="inline-flex items-center gap-2 px-3 py-2 rounded-xl border bg-white hover:bg-slate-50 text-sm">
        <i data-lucide="circle-help" class="w-4 h-4"></i>
        Ayuda
      </button></div>
  </div>

  <!-- Filtros (auto-aplica) -->
  <div class="rounded-2xl border bg-white p-4">
    <div class="grid grid-cols-1 md:grid-cols-12 gap-3 items-end">
      <div class="md:col-span-3">
        <label class="block text-sm font-medium text-slate-700 mb-1">Año</label>
        <select id="rcat-year" class="w-full p-2 rounded-xl border"></select>
      </div>

      <div class="md:col-span-3">
        <label class="block text-sm font-medium text-slate-700 mb-1">Mes</label>
        <select id="rcat-month" class="w-full p-2 rounded-xl border"></select>
      </div>

      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-slate-700 mb-1">Moneda</label>
        <select id="rcat-currency" class="w-full p-2 rounded-xl border">
          <option value="CRC">CRC</option>
          <option value="USD">USD</option>
        </select>
      </div>

      <div class="md:col-span-4">
        <label class="block text-sm font-medium text-slate-700 mb-1">Cuenta</label>
        <select id="rcat-account" class="w-full p-2 rounded-xl border"></select>
      </div>

      <div class="md:col-span-4">
        <label class="block text-sm font-medium text-slate-700 mb-1">Orden</label>
        <select id="rcat-order" class="w-full p-2 rounded-xl border">
          <option value="desc">Monto (mayor → menor)</option>
          <option value="asc">Monto (menor → mayor)</option>
        </select>
      </div>

      <div class="md:col-span-4 flex items-center gap-2 mt-2 md:mt-0">
  <button id="rcat-expand-btn" type="button" class="px-3 py-2 rounded-xl border bg-white hover:bg-slate-50 text-sm">Expandir</button>
  <button id="rcat-collapse-btn" type="button" class="px-3 py-2 rounded-xl border bg-white hover:bg-slate-50 text-sm">Contraer</button>
</div>

      <div class="md:col-span-4">
        <label class="block text-sm font-medium text-slate-700 mb-1">Tipo</label>
        <select id="rcat-type" class="w-full p-2 rounded-xl border">
          <option value="expense">Gastos</option>
          <option value="income">Ingresos</option>
          <option value="both">Ambos (Ingresos + Gastos)</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Tabla -->
  <div class="rounded-2xl border bg-white p-4">
    <div class="flex items-center justify-between gap-3">
      
      <div class="font-semibold text-slate-900">Detalle por categoría</div>
      <div class="text-xs text-slate-500" id="rcat-range-label">—</div>
    </div>

    <div class="mt-3 overflow-auto">
      <table class="w-full text-sm">
        <thead class="text-slate-600">
          <tr class="border-b">
            <th class="text-left py-2 pr-2">Categoría</th>
            <th class="text-right py-2 px-2">Monto</th>
            <th class="text-right py-2 pl-2">% participación</th>
          </tr>
        </thead>
        <tbody id="rcat-tbody" class="text-slate-800"></tbody>
      </table>
    </div>
  </div>
</div>

<!-- Modal drill-down -->
<div id="rcat-modal" class="fixed inset-0 z-50 hidden">
  <div class="absolute inset-0 bg-black/40"></div>
  <div class="absolute inset-0 flex items-center justify-center p-4">
    <div class="w-full max-w-5xl bg-white rounded-2xl border shadow-xl overflow-hidden">
      <div class="flex items-center justify-between p-4 border-b">
        <div>
          <div class="text-sm text-slate-500" id="rcat-modal-subtitle">Movimientos</div>
          <div class="text-lg font-semibold text-slate-900" id="rcat-modal-title">—</div>
        </div>
        <button id="rcat-modal-close" class="px-3 py-2 rounded-xl border hover:bg-slate-50">Cerrar</button>
      </div>
      <div class="p-4">
        <div class="text-xs text-slate-500 mb-2" id="rcat-modal-range">—</div>
        <div class="overflow-auto max-h-[70vh]">
          <table class="w-full text-sm">
            <thead class="text-slate-600">
              <tr class="border-b">
                <th class="text-left py-2 pr-2">Fecha</th>
                <th class="text-left py-2 px-2">Descripción</th>
                <th class="text-left py-2 px-2">Cuenta</th>
                <th class="text-right py-2 pl-2">Monto</th>
              </tr>
            </thead>
            <tbody id="rcat-modal-tbody" class="text-slate-800"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
